<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bazaar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#f1f5f9;font-family:system-ui;}
.box{background:white;margin:20px;padding:20px;border-radius:18px;text-align:center;}
.btn{display:block;margin:8px 0;padding:12px;border-radius:12px;color:white;text-decoration:none;}
.call{background:#2563eb;}
.wa{background:#16a34a;}
.map{background:#f97316;}
.opt{background:#64748b;}
</style>
</head>
<body>

<div class="box">
<h2 id="name"></h2>
<div id="addr"></div>

<a id="call" class="btn call">Call</a>
<a id="wa" class="btn wa">WhatsApp</a>
<a id="map" class="btn map">Open Map</a>

<a id="fb" class="btn opt">Facebook</a>
<a id="ig" class="btn opt">Instagram</a>
<a id="yt" class="btn opt">YouTube</a>
<a id="dukan" class="btn opt">Dukan Store</a>
<a id="mail" class="btn opt">Email</a>

<img id="qr" style="width:200px;margin-top:10px;">
<button onclick="shareShop()">Share</button>
</div>

<script>
const s=JSON.parse(localStorage.getItem("currentShop"));

name.textContent=s.name;
addr.textContent=s.address;

call.href="tel:"+s.phone;
wa.href="https://wa.me/"+s.whatsapp;
map.href="https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(s.address);

function opt(btn,link){
 if(link) btn.href=link;
 else btn.style.display="none";
}

opt(fb,s.facebook);
opt(ig,s.instagram);
opt(yt,s.youtube);
opt(dukan,s.dukan);
opt(mail,"mailto:"+s.email);

if(s.jazzcashQR) qr.src=s.jazzcashQR;
else qr.style.display="none";

function shareShop(){
 navigator.share({
  title:s.name,
  text:"Check this shop on Bazaar",
  url:location.href
 });
}

history.pushState(null,null,location.href);
window.onpopstate=()=>{history.go(1);}
</script>
</body>
</html>
