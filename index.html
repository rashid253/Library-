<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Business Card Generator</title>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<style>
:root{
  --primary:#2C3E50;
  --secondary:#3498DB;
  --light:#ecf0f1;
  --danger:#e74c3c;
}

body{
  margin:0;
  padding:15px;
  font-family:Segoe UI, system-ui, sans-serif;
  background:linear-gradient(135deg,#e9ecef,#f4f6f8);
  display:flex;
  justify-content:center;
}

.form-box{
  width:100%;
  max-width:450px;
  background:#fff;
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}

h2{
  margin:0;
  color:var(--primary);
  text-align:center;
}

p.subtitle{
  text-align:center;
  color:#666;
  margin-bottom:20px;
}

.group{
  margin-bottom:14px;
}

label{
  font-weight:600;
  color:#333;
  display:block;
  margin-bottom:4px;
}

input, textarea, select{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
}

textarea{resize:vertical;}

.error{border:2px solid var(--danger);}

.image-box{
  border:2px dashed #ccc;
  text-align:center;
  padding:16px;
  border-radius:10px;
  cursor:pointer;
}

.image-box i{color:#777;}

#profileImage{display:none;}

#preview{
  width:90px;
  height:90px;
  border-radius:50%;
  object-fit:cover;
  display:none;
  margin:10px auto 0;
}

.phone-wrap{
  display:flex;
  gap:6px;
}

.phone-wrap select{width:35%;}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:8px;
  background:var(--secondary);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="form-box">
  <h2>Create Business Card</h2>
  <p class="subtitle">Fill all required information</p>

  <div class="group image-box">
    <label for="profileImage">
      <i class="fa fa-camera fa-2x"></i>
      <p>Upload Profile Photo</p>
    </label>
    <input type="file" id="profileImage" accept="image/*">
    <img id="preview">
  </div>

  <div class="group">
    <label>Full Name *</label>
    <input id="name" required>
  </div>

  <div class="group">
    <label>Business Name *</label>
    <input id="businessName" required>
  </div>

  <div class="group">
    <label>Business Info *</label>
    <textarea id="businessInfo" rows="5" required></textarea>
  </div>

  <div class="group">
    <label>Address *</label>
    <input id="address" required>
  </div>

  <div class="group">
    <label>Phone *</label>
    <div class="phone-wrap">
      <select id="code">
        <option value="+92">+92</option>
        <option value="+91">+91</option>
        <option value="+1">+1</option>
        <option value="+44">+44</option>
      </select>
      <input id="phone" placeholder="Number">
    </div>
  </div>

  <div class="group">
    <label>Email *</label>
    <input id="email" type="email">
  </div>

  <div class="group">
    <label>Facebook</label>
    <input id="facebook">
  </div>

  <div class="group">
    <label>Instagram</label>
    <input id="instagram">
  </div>

  <div class="group">
    <label>YouTube</label>
    <input id="youtube">
  </div>

  <button id="generate">Generate Card</button>
</div>

<script>
const imgInput=document.getElementById("profileImage");
const preview=document.getElementById("preview");

imgInput.onchange=e=>{
  const r=new FileReader();
  r.onload=()=>{preview.src=r.result;preview.style.display="block";}
  r.readAsDataURL(e.target.files[0]);
};

function resizeImage(file,cb){
  const img=new Image();
  const r=new FileReader();
  r.onload=e=>{
    img.src=e.target.result;
    img.onload=()=>{
      const c=document.createElement("canvas");
      const max=160;
      let w=img.width,h=img.height;
      if(w>h && w>max){h*=max/w;w=max;}
      else if(h>max){w*=max/h;h=max;}
      c.width=w;c.height=h;
      c.getContext("2d").drawImage(img,0,0,w,h);
      cb(c.toDataURL("image/jpeg",0.45));
    }
  };
  r.readAsDataURL(file);
}

document.getElementById("generate").onclick=()=>{
  const data={
    name:name.value,
    businessName:businessName.value,
    businessInfo:businessInfo.value,
    address:address.value,
    phone:code.value+phone.value,
    email:email.value,
    facebook:facebook.value,
    instagram:instagram.value,
    youtube:youtube.value,
    profileImage:""
  };

  const f=imgInput.files[0];
  if(f){
    resizeImage(f,b64=>{
      data.profileImage=b64;
      location.href="card.html?"+new URLSearchParams(data);
    });
  }else{
    location.href="card.html?"+new URLSearchParams(data);
  }
};
</script>

</body>
</html>
