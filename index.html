<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bazaar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
<script>
if("serviceWorker" in navigator){
 navigator.serviceWorker.register("sw.js");
}
</script>
<style>
body{margin:0;font-family:system-ui;background:#f8fafc;}
header{background:#0f172a;color:white;padding:20px;text-align:center;}
.search{padding:15px;}
input{width:100%;padding:12px;border-radius:12px;border:1px solid #ccc;}
.card{
 background:white;
 margin:12px;
 padding:14px;
 border-radius:16px;
 box-shadow:0 10px 30px rgba(0,0,0,.08);
}
.featured{border-left:5px solid gold;}
.ad{margin:12px;padding:20px;border-radius:16px;background:#fde047;text-align:center;}
</style>
</head>
<body>

<header>
<h2>Bazaar</h2>
<div>Sab dukaanen, ek jagah</div>
</header>

<div class="search">
<input id="search" placeholder="Search shops...">
</div>

<div class="ad">Advertisement Space</div>

<div id="list"></div>

<script>
let shops=[];

fetch("shops.json").then(r=>r.json()).then(d=>{
 shops=d;
 render(d);
});

function render(arr){
 list.innerHTML="";
 arr.forEach(s=>{
  const d=document.createElement("div");
  d.className="card"+(s.featured?" featured":"");
  d.innerHTML=`<b>${s.name}</b><br>${s.category}<br><small>${s.address}</small>`;
  d.onclick=()=>{
   localStorage.setItem("currentShop",JSON.stringify(s));
   location.href="card.html";
  };
  list.appendChild(d);
 });
}

search.oninput=()=>{
 const q=search.value.toLowerCase();
 render(shops.filter(s=>s.name.toLowerCase().includes(q)));
};
</script>
</body>
</html>
